<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>STORE HUY MẬP | THẾ GIỚI GIÀY CHÍNH HÃNG</title>
    
    <link rel="icon" type="image/png" href="./assets/logo/favicon-16x16.png" />
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./styles/styles.css" />
    <link href="https://unpkg.com/boxicons@2.1.2/css/boxicons.min.css" rel="stylesheet" />
</head>

<body>
    <div id="overlay" class="overlay"></div>

    <nav class="navbar">
        <div class="logo">HUY MẬP STORE®</div>
        
        <ul class="nav-links">
            <li><a href="index.html" class="active">TRANG CHỦ</a></li>
            <li><a href="adidas.html">ADIDAS</a></li>
            <li><a href="nike.html">NIKE</a></li>
            <li><a href="phukien.html">PHỤ KIỆN</a></li>
        </ul>
      
        <div class="header-right" id="staff-area">
            <a href="login.html" id="loginBtn" style="text-decoration: none;">
                <button style="background: #e44d26; color: white; border: none; padding: 8px 15px; border-radius: 5px; font-family: 'Oswald'; cursor: pointer; margin-right: 10px;">
                    <i class='bx bx-user'></i> NHÂN VIÊN
                </button>
            </a>

            <div class="search-bar">
                <input type="text" id="searchInput" placeholder="Tìm kiếm sản phẩm...">
            </div>
            <div class="cart-icon" id="cart-icon" onclick="openCart()">
                <i class="bx bx-shopping-bag"></i>
                <span id="cart-count">0</span>
            </div>
        </div>
    </nav>

    <header class="hero-section">
        <div class="hero-content">
            <h1>THAY ĐỔI<br>CUỘC CHƠI</h1>
            <button class="btn-primary">MUA NGAY</button>
        </div>
    </header>

    <section class="categories">
        <div class="cat-item filter-btn" data-category="adidas" style="cursor: pointer;">
            <img src="https://images.unsplash.com/photo-1587563871167-1ee9c731aefb?q=80&w=2031" alt="Category Adidas">
            <div class="cat-label">ADIDAS</div>
        </div>
        <div class="cat-item filter-btn" data-category="nike" style="cursor: pointer;">
            <img src="https://images.unsplash.com/photo-1556906781-9a412961c28c?q=80&w=1974" alt="Category Nike">
            <div class="cat-label">NIKE</div>
        </div>
        <div class="cat-item filter-btn" data-category="phukien" style="cursor: pointer;">
            <img src="https://images.unsplash.com/photo-1514989940723-e8e51635b782?q=80&w=2070" alt="Phụ kiện">
            <div class="cat-label">PHỤ KIỆN</div>
        </div>
    </section>

    <section class="product-section container">
        <div class="section-header">
            <h2 style="margin-bottom: 30px; letter-spacing: 2px;">SẢN PHẨM MỚI NHẤT</h2>
        </div>
        <div class="product-grid" id="productGrid">
            </div>
    </section>

    <section class="brand-intro-section">
        <div class="intro-box">
            <h2 class="intro-heading">CÂU CHUYỆN CỦA CHÚNG TÔI</h2>
            <div class="intro-text">
                <p>Từ sân vận động đến đường phố. Với bề dày lịch sử hàng thập kỷ, HUY MẬP STORE không chỉ bán giày, chúng tôi mang đến phong cách sống.</p>
            </div>
        </div>
    </section>

    <div class="cart-sidebar" id="cart-sidebar">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h2 class="cart-title">GIỎ HÀNG</h2>
            <i class="bx bx-x" id="close-cart" style="font-size: 2rem; cursor: pointer;"></i>
        </div>
        
        <div class="cart-content" id="cartItems">
            </div>

        <div class="total">
            <div style="display: flex; justify-content: space-between; padding-bottom: 10px; border-top: 1px solid #eee; padding-top: 15px;">
                <span>TỔNG CỘNG:</span>
                <span id="totalPrice" class="total-price">0đ</span>
            </div>
            <button type="button" class="checkout-btn" onclick="toggleCheckout()">THANH TOÁN NGAY</button>
        </div>
    </div>

    <div id="checkoutModal" class="modal">
        <div class="modal-content">
            <h3>XÁC NHẬN ĐƠN HÀNG</h3>
            <form id="checkoutForm">
                <input type="text" id="cusName" placeholder="Tên của bạn" required>
                <input type="text" id="cusPhone" placeholder="Số điện thoại" required>
                <textarea id="cusAddress" placeholder="Địa chỉ nhận hàng" required></textarea>
                <p style="margin: 15px 0;">Tổng thanh toán: <strong id="checkoutTotal" style="color: red;">0đ</strong></p>
                <button type="submit" class="btn-primary">HOÀN TẤT ĐẶT HÀNG</button>
                <button type="button" onclick="closeAllModals()" style="background: #eee; border: none; padding: 12px; width: 100%; margin-top: 10px; cursor: pointer; font-weight: bold;">HỦY</button>
            </form>
        </div>
    </div>

    <div id="historyModal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <div style="display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #000; padding-bottom: 10px; margin-bottom: 15px;">
                <h2 style="margin: 0; font-size: 1.2rem;">LỊCH SỬ MUA HÀNG</h2>
                <i class='bx bx-x' onclick="closeAllModals()" style="font-size: 24px; cursor: pointer;"></i>
            </div>
            <div id="historyList" style="max-height: 400px; overflow-y: auto;">
                </div>
            <div style="margin-top: 20px; display: flex; gap: 10px;">
                <button onclick="closeAllModals()" class="btn-primary" style="flex: 1;">ĐÓNG</button>
                <button onclick="clearHistory()" style="background: #eee; border: none; padding: 10px; cursor: pointer; font-size: 12px;">XÓA TẤT CẢ</button>
            </div>
        </div>
    </div>

    <div id="invoiceModal" class="modal">
        <div class="modal-content" style="max-width: 400px; border: 2px solid #000; padding: 25px;">
            <div id="invoiceDetails">
                </div>
            <button onclick="closeAllModals()" class="btn-primary" style="width: 100%; margin-top: 20px;">XÁC NHẬN & ĐÓNG</button>
        </div>
    </div>

    <button class="view-history-btn" onclick="toggleHistory()">
        <i class='bx bx-history'></i> LỊCH SỬ ĐƠN HÀNG
    </button>
    <a href="history.html" style="position: fixed; bottom: 80px; left: 20px; background: #3b82f6; color: white; padding: 10px 15px; border-radius: 50px; text-decoration: none; font-size: 12px; font-weight: bold; z-index: 1000; display: flex; align-items: center; gap: 5px;">
        <i class='bx bx-shield-quarter'></i> QUẢN LÝ DOANH THU
    </a>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const loggedInUser = localStorage.getItem('currentUser');
        const staffArea = document.getElementById('staff-area');
        const loginBtn = document.getElementById('loginBtn');

        // CHỈ CHÈN 1 LẦN DUY NHẤT
        if (loggedInUser && staffArea) {
            if(loginBtn) loginBtn.style.display = 'none';

            if(!document.getElementById('welcome-info')) {
                const greetingHTML = `
                    <div id="welcome-info" style="display: flex; align-items: center; gap: 10px; margin-right: 15px;">
                        <span style="font-family:'Oswald'; font-weight:bold; color:#e44d26; white-space: nowrap; font-size: 14px;">
                            CHÀO: ${loggedInUser.toUpperCase()}
                        </span>
                        <button onclick="logout()" style="background:#333; color:#fff; border:none; padding:4px 8px; cursor:pointer; font-family:'Oswald'; border-radius:3px; font-size:10px;">
                            THOÁT
                        </button>
                    </div>
                `;
                staffArea.insertAdjacentHTML('afterbegin', greetingHTML);
            }
        }
    });

    function logout() {
        localStorage.removeItem('currentUser');
        window.location.reload();
    }

    function openCart() {
        document.getElementById('cart-sidebar').classList.add('active');
        document.getElementById('overlay').classList.add('active');
    }

    function closeCart() {
        document.getElementById('cart-sidebar').classList.remove('active');
        document.getElementById('overlay').classList.remove('active');
    }
    </script>

    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script src="./js/products.js"></script>
    <script src="./js/main.js"></script>
    <script src="js/script.js"></script>
</body>
</html>